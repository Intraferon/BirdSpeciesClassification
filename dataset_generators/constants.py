import math


# Paths

BASE_PATH = "C:/Users/sanam/Documents/Python Projects/BirdSpeciesClassification/"
RESOURCE_PATH = "C:/Users/sanam/Documents/Python Projects/BirdSpeciesClassificationResources/"


# Data Formats

IMAGE_FORMAT = "jpeg"
AUDIO_FORMAT = "mp3"
TRAIN_AUDIO_FORMAT = "wav"
SPECTROGRAM_FORMAT = "png"


# Image Configuration

IMAGE_MAXIMUM_DIMENSION = 800


# Spectrogram Configuration

# Spectrogram Creation
AUDIO_SAMPLE_RATE = 44100
SPECTROGRAM_WINDOW_LENGTH = 512
SPECTROGRAM_WINDOW_OVERLAP = 25
SPECTROGRAM_HOP_LENGTH = int(((100 - SPECTROGRAM_WINDOW_OVERLAP) / 100) * SPECTROGRAM_WINDOW_LENGTH)
SPECTROGRAM_WINDOW_FUNCTION = "hann"
SPECTROGRAM_MINIMUM_FREQUENCY = 150
SPECTROGRAM_MAXIMUM_FREQUENCY = 15000
SPECTROGRAM_MINIMUM_FREQUENCY_BAND = int(math.floor((SPECTROGRAM_MINIMUM_FREQUENCY * SPECTROGRAM_WINDOW_LENGTH) / AUDIO_SAMPLE_RATE))
SPECTROGRAM_MAXIMUM_FREQUENCY_BAND = int(math.ceil((SPECTROGRAM_MAXIMUM_FREQUENCY * SPECTROGRAM_WINDOW_LENGTH) / AUDIO_SAMPLE_RATE))
SPECTROGRAM_E = 1e-5
SPECTROGRAM_TRIM_UPPER = True
SPECTROGRAM_TRIM_LOWER = True
SPECTROGRAM_SPECTRAL_LENGTH = int(SPECTROGRAM_WINDOW_LENGTH / 2 + 1)
SPECTROGRAM_HEIGHT = SPECTROGRAM_SPECTRAL_LENGTH - SPECTROGRAM_MINIMUM_FREQUENCY_BAND - (SPECTROGRAM_SPECTRAL_LENGTH - SPECTROGRAM_MAXIMUM_FREQUENCY_BAND)
SPECTROGRAM_DEPTH = 3

# Spectrogram Dimensions
AUDIO_DURATION = 5
SPECTROGRAM_LENGTH = int((int(AUDIO_DURATION * AUDIO_SAMPLE_RATE) - SPECTROGRAM_WINDOW_LENGTH) / SPECTROGRAM_HOP_LENGTH) + 1
AUDIO_LENGTH = (SPECTROGRAM_LENGTH - 1) * SPECTROGRAM_HOP_LENGTH + SPECTROGRAM_WINDOW_LENGTH
MINIMUM_AUDIO_HOP_LENGTH = int(0.2 * AUDIO_LENGTH)
CENTER_AUDIO_HOP_LENGTH = int(1.8 * AUDIO_LENGTH)
MAXIMUM_AUDIO_HOP_LENGTH = int(0.9 * AUDIO_LENGTH)

MINIMUM_SIGNAL_DURATION = 0.5
MINIMUM_SPECTROGRAM_LENGTH = int((int(MINIMUM_SIGNAL_DURATION * AUDIO_SAMPLE_RATE) - SPECTROGRAM_WINDOW_LENGTH) / SPECTROGRAM_HOP_LENGTH) + 1
MINIMUM_SIGNAL_LENGTH = (MINIMUM_SPECTROGRAM_LENGTH - 1) * SPECTROGRAM_HOP_LENGTH + SPECTROGRAM_WINDOW_LENGTH

MINIMUM_NOISE_DURATION = 6
MAXIMUM_NOISE_DURATION = 180
MAXIMUM_NOISE_LENGTH = int(MAXIMUM_NOISE_DURATION * AUDIO_SAMPLE_RATE)

# Spectrogram Median Clipping
SIGNAL_MEDIAN_THRESHOLD = 3.0
MINIMUM_SIGNAL_MEDIAN_THRESHOLD = 2.5
SIGNAL_MEDIAN_THRESHOLD_STEP = 0.1
NOISE_MEDIAN_THRESHOLD_DIFFERENCE = 0.5
MINIMUM_NOISE_MEDIAN_THRESHOLD = 2.0

# Instance Generator Configuration

# Batch Size
IMAGE_BATCH_SIZE = 32
AUDIO_BATCH_SIZE = 32
JOINT_BATCH_SIZE = 16
CONTEXT_BATCH_SIZE = 256

# Label Smoothing
LABEL_SMOOTHING_E = 0.1

# Sampling
MINIMUM_SPECTROGRAM_COUNT = 5
MAXIMUM_SPECTROGRAM_COUNT = 10
MAXIMUM_IMAGE_COUNT = 5

# Model Configuration

INCEPTION_DIMENSIONS = (299, 299, 3)

# Image Augmentation Configuration

HORIZONTAL_FLIP_PROBABILITY = 0.5
IMAGE_MINIMUM_SCALE = 0.7
IMAGE_MAXIMUM_SCALE = 1.0
IMAGE_MINIMUM_RATIO = 0.75
IMAGE_MAXIMUM_RATIO = 1.25
IMAGE_CROP_RATIO = 0.8

# Audio Augmentation Configuration

# Noise Addition
NOISE_ADDITION_PROBABILITY = 0.5
NOISE_ADDITION_COUNT = 2
MAXIMUM_NOISE_DAMPING_FACTOR = 0.8
MINIMUM_NOISE_DAMPING_FACTOR = 0.2



